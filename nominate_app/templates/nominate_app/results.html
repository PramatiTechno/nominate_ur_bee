{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/data_table.css' %}">
<script>
$(function(){

	$("#datepicker").datepicker({
	    format: "MM yyyy",
	    startView: "months", 
	    minViewMode: "months"
	});

	$('.submit').on('click', function(){
		var date = $('#datepicker').val()
		if(date != ''){
			$('#date-form').submit()
		}
	})

})
</script>

<style>


.box-part{
    background:#F4F4F4A3;
    border-radius:10px;
    box-shadow: 2px 2px 8px rgba(110,110,110,0.2);
    padding:30px 10px;
    margin:30px 0px;
}

.image{
 width: 100%;
 height: 100%;
}

</style>

<div class="container-fluid" style="padding-left:0px !important;padding-right:0px !important;">
  <div class="header" style="background-image: linear-gradient(to right, #5e7479 , #70e4af5e);color:white;padding:10px 20px;font-size:14px !important;">
        <h5>Results</h5>
  </div>
</div>

<div class="container">
	<div class="row">
		<div class="col-md-4 offset-8">
			<form id = "date-form" action="/results/" method="GET">
				<label for="datepicker"> Date </label>
				<input type="text" id="datepicker" name="date" value="{{ date }}" required>
				<button class="submit btn btn-primary btn-sm"> Filter </button>
			</form>
		</div>
	</div>
</div>

	<div class="container">
		<div class="d-flex p-2 bg-info text-white">  
			Published
		</div>
	    <div class="row">
			{% for submission in submissions %}
			<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">      
				<div class="box-part">
					<div class="row">																							
						<div class="col-md-5">
							{% if submission.image_avail %}
								<img class="image" src="{{ submission.image_path }}" alt="Image Unavailable">
							{% else %}
		            			<i class="fa fa-star fa-5x" style="color:gold; display: inline-block;" aria-hidden="true"></i>
							{% endif %}
		            	</div>
						<div class="col-md-7">
							<h6>{{ submission.object.award_name }}</h6>
							<h6>{{ submission.object.template_name }} </h6>
							<p class="text-muted text-sm"> {{ submission.nomination.start_day }} - {{ submission.nomination.end_day }}
						</div>
		            </div>
		            
					<div class="text p-1">
						<span>Director: {{ submission.comment }}</span>
					</div>
		            		            
				 </div>
			</div>
			{% empty %}
				<p class="p-2 text-muted ml-2">No Results Found</p>
			{% endfor %}

		</div>
		{% if user.userprofile.get_group_name == "admin" %}
			<div class="d-flex p-2 bg-info text-white">  
				To be Published
			</div>		
			<div class="row">
					{% for submission in unpublished_submissions %}
					<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">      
						<div class="box-part">
							<div class="row">
								<div class="col-md-5">
									{% if submission.image_avail %}
										<img class="image" src="{{ submission.image_path }}" alt="Image Unavailable">
									{% else %}
										<i class="fa fa-star fa-5x" style="color:gold; display: inline-block;" aria-hidden="true"></i>
									{% endif %}
								</div>
								<div class="col-md-4">
									<h6>{{ submission.object.award_name }}</h6>
									<h6>{{ submission.object.template_name }} </h6>
									<p class="text-muted text-sm"> {{ submission.nomination.start_day }} - {{ submission.nomination.end_day }}
								</div>
							</div>
							<div class="text p-1">
								<span>Director: {{ submission.comment }}</span>
							</div>					
							<div class="col-md-12">
								<a href="/publish/{{ submission.object.id }}">
									<button type="submit" class="btn btn-success">Publish</button>
								</a>
							</div>																				
						</div>
						{% empty %}
							<p class="p-2 text-muted ml-2">No Unpublished Results Found</p>
						{% endfor %}
					</div>
			</div>
		{% endif %}		
	</div>

{% endblock %}
